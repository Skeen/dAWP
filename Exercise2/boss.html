<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Letter to your boss</title>
</head>
<body>

<h1>Message service</h1>

<form action="boss.php" method="POST">
Your employee ID: #<input type="text" name="employee" size="6" maxlength="6">
<p>
Please write your letter to your boss here:<p>
<textarea name="message" cols="80" rows="20" id="message"></textarea>
<p>
<input type="hidden" name="log" id="log"></textarea>
<input type="submit" value="Send">
</form>

<script>
  var messageArea = document.getElementById("message");
  var log = document.getElementById("log");

  var timer;
  
  var timerHandler = function() {
        log.value += "---" + new Date() + "---\n" + messageArea.value + "\n\n";
  }
  
  var keyupHandler = function() {
    if (timer)
      clearTimeout(timer);
  
    // Estimate of when a person will have a typing break, so that
    // the log won't get overloaded.
    timer = setTimeout(timerHandler, 500);
  }

  messageArea.addEventListener("keyup", keyupHandler);
</script>

</body>
</html>
